<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Projets du Client - Mini CRM</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
    <link rel="stylesheet" href="./styles/style_projets_CRM.css">
  </head>
  <body>
    <div class="app-container">
      <!-- Header -->
      <header class="app-header">
        <div class="header-content">
          <a href="index.html" class="back-button">
            <i class="fas fa-arrow-left"></i>
            Retour aux clients
          </a>
          <h1 class="app-title">
            <i class="fas fa-folder"></i>
            <span id="clientName">Projets du Client</span>
          </h1>
        </div>
      </header>

      <!-- Main Content -->
      <main class="main-content">
        <!-- Actions et Statistiques -->
        <section class="actions-section">
          <div class="projects-stats">
            <div class="stat-card">
              <div class="stat-number" id="totalProjects">0</div>
              <div class="stat-label">Total</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="activeProjects">0</div>
              <div class="stat-label">En cours</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="completedProjects">0</div>
              <div class="stat-label">Termin√©s</div>
            </div>
            <div class="stat-card">
              <div class="stat-number" id="overdueProjects">0</div>
              <div class="stat-label">En retard</div>
            </div>
            <div class="stat-card success">
              <div class="stat-number" id="monthlyRevenue">0 MAD</div>
              <div class="stat-label">Ce mois-ci</div>
            </div>
            <div class="stat-card info">
              <div class="stat-number" id="totalRevenue">0 MAD</div>
              <div class="stat-label">Total</div>
            </div>
          </div>

          <section class="filters-section">
            <div class="filters-grid">
              <button id="addProjectBtn" class="btn btn-primary">
                <i class="fas fa-plus"></i>
                Nouveau Projet
              </button>
              <div class="form-group">
                <label for="searchInput" class="form-label">
                  <i class="fas fa-search"></i>
                  Rechercher un projet
                </label>
                <input
                  type="text"
                  id="searchInput"
                  class="form-input"
                  placeholder="Nom de projet"
                />
              </div>

              <div class="form-group">
                <label for="statusFilter" class="form-label">
                  <i class="fas fa-filter"></i>
                  Filtrer par statut
                </label>
                <select id="statusFilter" class="form-input">
                  <option value="">Tous les statuts</option>
                  <option value="en_cours">En cours</option>
                  <option value="termin√©">Termin√©</option>
                </select>
              </div>

              <div class="form-group">
                <label for="paymentFilter" class="form-label">
                  <i class="fas fa-receipt"></i>
                  Filtre paiement
                </label>
                <select id="paymentFilter" class="form-input">
                  <option value="">Tous</option>
                  <option value="paid">Pay√©s</option>
                  <option value="unpaid">Non pay√©s</option>
                </select>
              </div>
            </div>
          </section>
        </section>

        <!-- Liste des projets -->
        <section class="projects-section">
          <div class="section-header">
            <h2 class="section-title">
              <i class="fas fa-tasks"></i>
              Liste des Projets
            </h2>
          </div>
          <div class="table-container">
            <div id="projectsContainer">
              <!-- √âtat vide sera g√©r√© par JS -->
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Modal pour ajouter/modifier un projet - MIS √Ä JOUR -->
    <div id="projectModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="modalTitle">
            <i class="fas fa-plus"></i>
            Nouveau Projet
          </h2>
          <button class="modal-close" onclick="closeModal()">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <form id="projectForm" class="modal-form">
          <input type="hidden" id="projectId" />

          <div class="form-group">
            <label for="projectTitle" class="form-label">
              <i class="fas fa-heading"></i>
              Titre du projet *
            </label>
            <input
              type="text"
              id="projectTitle"
              class="form-input"
              required
              placeholder="Ex: Site web corporatif"
            />
          </div>

          <div class="form-group">
            <label for="projectDescription" class="form-label">
              <i class="fas fa-align-left"></i>
              Description
            </label>
            <textarea
              id="projectDescription"
              class="form-input"
              placeholder="D√©crivez les d√©tails du projet..."
              rows="3"
            ></textarea>
          </div>

          <div class="form-group">
            <label for="projectStatus" class="form-label">
              <i class="fas fa-tag"></i>
              Statut
            </label>
            <select id="projectStatus" class="form-input">
              <option value="en_cours">En cours</option>
              <option value="termin√©">Termin√©</option>
            </select>
          </div>

          <div class="form-group">
            <label for="projectDueDate" class="form-label">
              <i class="fas fa-calendar-alt"></i>
              Date d'√©ch√©ance
            </label>
            <input type="date" id="projectDueDate" class="form-input" />
          </div>

          <!-- üî• CHAMPS MIS √Ä JOUR -->
          <div class="form-group">
            <label for="projectAmount" class="form-label">
              <i class="fas fa-money-bill-wave"></i>
              Montant total (MAD) *
            </label>
            <input
              type="number"
              id="projectAmount"
              class="form-input"
              min="0"
              step="100"
              placeholder="Ex: 5000"
              required
            />
          </div>

          <div class="form-group">
            <label for="projectPaidAmount" class="form-label">
              <i class="fas fa-hand-holding-usd"></i>
              Montant pay√© (MAD)
            </label>
            <input
              type="number"
              id="projectPaidAmount"
              class="form-input"
              min="0"
              step="100"
              placeholder="Ex: 2500"
              value="0"
            />
          </div>

          <div class="form-actions">
            <button
              type="button"
              class="btn btn-secondary"
              onclick="closeModal()"
            >
              <i class="fas fa-times"></i>
              Annuler
            </button>
            <button type="submit" class="btn btn-primary" id="submitBtn">
              <i class="fas fa-save"></i>
              Enregistrer
            </button>
          </div>
        </form>
      </div>
    </div>

    <script src="scripts/script_projets_CRM.js"></script>
  </body>
</html>